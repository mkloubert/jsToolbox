// LICENSE: LGPL 3 - https://www.gnu.org/licenses/lgpl-3.0.txt

// s. https://github.com/mkloubert/jsToolbox

Number.prototype.padLeft=function(e,t){if(typeof t=="undefined"){t="0"}return this.toString().padLeft(e,t)};String.prototype.endsWith=function(e){return this.indexOf(suffix,this.length-e.length)>-1};String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return typeof e[n]!="undefined"?e[n]:t})};String.prototype.padLeft=function(e,t){if(typeof e=="undefined"){e=0}if(typeof t=="undefined"){t=" "}var n=this;if(e+1>=n.length){n=Array(e+1-n.length).join(t)+n}return n};String.prototype.startsWith=function(e){return 0==this.indexOf(e)};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!String.prototype.trimLeft){String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}}if(!String.prototype.trimRight){String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}}String.prototype.ucwords=function(){var e=this.toLowerCase();return e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};var jsToolboxMJK={};(function($jsTB){Object.defineProperty($jsTB,"$",{get:function(){return this.jQuery}});Object.defineProperty($jsTB,"body",{get:function(){return this.jQuery("body")}});Object.defineProperty($jsTB,"head",{get:function(){return this.jQuery("head")}});Object.defineProperty($jsTB,"jQuery",{get:function(){return window.jQuery}});Object.defineProperty($jsTB,"noop",{get:function(){return this.jQuery.noop}});Object.defineProperty($jsTB,"now",{get:function(){return new Date}});Object.defineProperty($jsTB,"nowUTC",{get:function(){var e=this.now;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}});$jsTB.events={};{$jsTB.events.pageLoaded=function(e,t){var n={};var r=null;var i=null;for(var s=0;s<$jsTB.page.__onPageLoadedActions.length;s++){var o=$jsTB.page.__onPageLoadedActions[s];var u=o.action;var a=o.state;var f=o.options;var l={continueOnError:f.continueOnError,index:s,lastErr:r,prevState:i,nextState:null,state:a,vars:n};Object.defineProperty(l,"isFirst",{get:function(){return this.index==0}});Object.defineProperty(l,"isLast",{get:function(){return this.index+1==$jsTB.page.__onPageLoadedActions.length}});r=null;try{if(u){u($jsTB,l)}}catch(c){r=c;l.error=c;if(f.error){if(null==l.continueOnError){l.continueOnError=true}f.error($jsTB,l)}else{if(null==l.continueOnError){l.continueOnError=false}}if(!f.continueOnError){throw c}}finally{if(f.complete){f.complete($jsTB,l)}}i=l.nextState}}}$jsTB.funcs={};{$jsTB.funcs.asFunc=function(e){var t=e;if(!this.isFunc(t)){t=function(){return e}}return t};$jsTB.funcs.asJQuery=function(e){if(!this.isJQuery(e)){e=$jsTB.jQuery(e)}return e};$jsTB.funcs.buildBatch=function(e){e=$jsTB.jQuery.extend({stopOnFirstError:true},e);var t=[];var n={};n.add=function(e){var t={args:[],"function":e};for(var n=1;n<arguments.length;n++){t.args.push(arguments[n])}return this};n.clear=function(){t=[];return this};n.__getItem=function(e){return t[e]};n.invoke=function(t){t=$jsTB.jQuery.extend({stopOnFirstError:e.stopOnFirstError?true:false},t);var n=[];for(var r=0;r<this.length;r++){var i=this.__getItem(r);var s=$jsTB.funcs.invokeArray(i.function,i.args);n.push(s);if(s.hasFailed){if(t.stopOnFirstError){break}}}return n};Object.defineProperty(n,"length",{get:function(){return t.length}});return n};$jsTB.funcs.eval=function(e){return $jsTB.jQuery.globalEval(e)};$jsTB.funcs.invoke=function(e){var t=[];for(var n=1;n<arguments.length;n++){t.push(arguments[n])}return this.invokeArray(e,t)};$jsTB.funcs.invokeArray=function(fn,args){if(!args){args=[]}var result={args:args,hasBeenInvoked:false};Object.defineProperty(result,"duration",{get:function(){if(!this.startTime||!this.endTime){return}return this.endTime-this.startTime}});Object.defineProperty(result,"hasFailed",{get:function(){return this.error?true:false}});try{if(fn){result.hasBeenInvoked=true;var code="fn(";for(var i=0;i<result.args.length;i++){if(i>0){code+=","}code+="result.args[{0}]".format(i)}code+=");";result.startTime=$jsTB.now;result.result=eval(code);result.endTime=$jsTB.now}}catch(e){result.endTime=$jsTB.now;result.error=e}return result};$jsTB.funcs.isArray=function(e){return $jsTB.jQuery.isArray(e)};$jsTB.funcs.isFunc=function(e){return $jsTB.jQuery.isFunction(e)};$jsTB.funcs.isJQuery=function(e){return e instanceof jQuery};$jsTB.funcs.isString=function(e){return typeof e=="string"||e instanceof String};$jsTB.funcs.toStringSafe=function(e){var t=e;if(!t){t=""}if(!this.isString(t)){t=t.toString()}return t};$jsTB.funcs.trim=function(e){return this.toStringSafe(e).trim()};$jsTB.funcs.trimLeft=function(e){return this.toStringSafe(e).trimLeft()};$jsTB.funcs.trimRight=function(e){return this.toStringSafe(e).trimRight()};$jsTB.funcs.waitForPage=function(e,t,n){n=$jsTB.jQuery.extend({waitUntilRetry:500},n);if(!t){t=null}if(!$jsTB.page.context){setTimeout(function(){$jsTB.funcs.waitForPage(e,t,n)},n.waitUntilRetry);return}e($jsTB,t)}}$jsTB.page={};{$jsTB.page.__onPageLoadedActions=[];$jsTB.page.addElement=function(e,t,n){n=$jsTB.jQuery.extend({target:this.elements},n);t=$jsTB.funcs.asJQuery(t);Object.defineProperty(n.target,$jsTB.jQuery.trim(e),{get:$jsTB.funcs.asFunc(t)});return this};$jsTB.page.addOnLoaded=function(e,t,n){n=$jsTB.jQuery.extend({continueOnError:null},n);if(!t){t=null}$jsTB.page.__onPageLoadedActions.push({action:e,options:n,state:t});return this};$jsTB.page.addVar=function(e,t,n){n=$jsTB.jQuery.extend({target:this.vars},n);Object.defineProperty(n.target,$jsTB.jQuery.trim(e),{get:$jsTB.funcs.asFunc(t)});return this};$jsTB.page.elements={};$jsTB.page.funcs={};$jsTB.page.lang={};$jsTB.page.request={};{$jsTB.page.request.GET={};document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g,function(){var e=function(e){return decodeURIComponent(e.split("+").join(" "))};$jsTB.page.request.GET[e(arguments[1])]=e(arguments[2])})}$jsTB.page.vars={}}$jsTB.jQuery(document).ready(function(){var e={};$jsTB.page.context=e;if($jsTB.events.pageLoaded){var t={};$jsTB.events.pageLoaded($jsTB,t)}})})(jsToolboxMJK);if(typeof $jsTB==="undefined"){$jsTB=jsToolboxMJK}